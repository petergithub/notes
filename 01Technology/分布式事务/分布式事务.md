# 分布式事务

## 分布式事务方案通常有哪些？

一般分为 6 种。

* 2PC：强一致性；数据库最早引入使用 2PC
* 3PC：相对于 2PC 引入超时机制；
* TCC：业务层面的分布式事务，Try - Confirm - Cancel；
* 本地消息表：利用各系统本地事务实现分布式事务；
* 消息事务：以 RocketMQ 为代表，通过中间件实现；
* 最大努力通知：柔性事务思想。

## 什么是 BASE 理论？

先回答3个概念

* **BA（Basically Available）**：鼓励通过架构设计，把可能影响全平台的严重问题，转化为只影响平台中的一部分数据或者功能的非严重问题。
* **软状态**：允许系统中的数据存在中间状态，并认为该状态不影响系统的整体可用性，即允许系统在多个不同节点的数据副本存在数据延时。
* **最终一致性**：指数据在多个副本之间能否保持一致的特性，也是分布式事务要解决的终极问题。

## 最终一致性分为哪几种？

5种：

* 因果一致性（Causal consistency）；
* 读己之所写（Read your writes）；
* 会话一致性（Session consistency）；
* 单调读一致性（Monotonic read consistency）；
* 单调写一致性（Monotonic write consistency）。

## Seata和LCN有何区别？

Seata 是阿里设计用来专门解决分布式事务的框架，未来可能会成为主流。

Seata 和 LCN 的思想相近，只不过 LCN 中采用的是假关闭，两者的区别是出错时，LCN 会发生死锁，而 Seata 不会，但 Seata 会脏读。

TCC、Seata 等分布式事务方案如何落地实践？每种方案分别更适合什么业务？如何设计高可用、高并发的分布式事务架构？
