# 10x程序员工作法 - 郑晔

## 01 10x程序员是如何思考的？

如果一个人能够清晰地回答出这三个问题，通常意味着他对要做的事有着清晰的认识

* Where are we?（我们现在在哪？）- 现状
* Where are we going?（我们要到哪儿去？）- 目标
* How can we get there?（我们如何到达那里？）- 实现路径

这个思考框架是为了让你明白为什么要提出问题，而具体问题要怎么问，就可以遵循下面这四项原则：

1. 以终为始，确定好真实目标；
2. 任务分解，找到实施路径；
3. 沟通反馈，解决与人打交道出现的问题；
4. 自动化，解决与机器打交道出现的问题。

## 02 以终为始：如何让你的努力不白费？

任何事物都要经过两次创造：一次是在头脑中的创造，也就是智力上的或者第一次创造（Mental/First Creation），然后才是付诸实践，也就是实际的构建或第二次创造（Physical/Second Creation）。

我们在工作中遇到的很多问题，其实就是在于第一次创造没有做好，就进入到第二次创造。

相比于第一次创造，第二次创造是一件成本很高的事。我们知道，软件开发最费时费力，一旦投入大量精力做出来，却发现与理解偏差甚大，所有人都会欲哭无泪。

所以，在动手做事之前，我们要在第一次创造上多下一些功夫，将相关各方的“集体想象”统一起来。以建筑为例，就是先在图纸上构思各种细节。对应到做软件，我们也可以做很多事，比如：

* 要给用户看产品的样子，可以用原型工具把它做出来，而不是非得把完整功能开发出来；
* 要呈现服务接口的样子，可以用模拟服务器搭出一个服务，而不用等后端全部开发完毕；
* 要让程序员知道要开发产品的细节，可以在任务上描述出软件各种场景给出的各种行为。

“以终为始”的思维可以帮助我们更好地规划我们手头任务，也可以帮助我们发现过程中的问题。

## 03 DoD的价值：你完成了工作，为什么他们还不满意？

DoD: Definition of Done，完成的定义

DoD 是一个清单，清单是由一个个的检查项组成的，用来检查我们的工作完成情况。
DoD 的检查项应该是实际可检查的。
DoD 是团队成员间彼此汇报的一种机制。

DoD（完成的定义），它是行业中的一种最佳实践，能够在团队内部很好地同步大家对“完成”的理解。好的 DoD 是一个可以检查的清单，可以确保你不遗漏任何事情。

在做任何事之前，先定义完成的标准。

## 04 接到需求任务，你要先做哪件事？

在实际的开发过程中，大量的分歧来自于对“需求完成”的定义。当我们把“以终为始”的原则应用在需求领域中，就会注意到，用户故事有一个非常重要的组成部分是验收标准。

验收标准不仅仅描述出了正常流程，也会关注到异常流程的处理，它也是我们验收测试用例的起点。一旦事先定义好验收标准，大量的扯皮工作就随之烟消云散了。

在做任何需求或任务之前，先定好验收标准。

## 05 持续集成：集成本身就是写代码的一个环节

尽早提交代码去集成

## 06 精益创业：产品经理不靠谱，你该怎么办？

精益创业的方法论里，提出“开发（build）-测量（measure）-认知（learn）”这样一个反馈循环。就是说，当你有了一个新的想法（idea）时，就把想法开发成产品（code）投入市场，然后，收集数据（data）获取反馈，看看前面的想法是不是靠谱。

得到的结果无非是两种：好想法继续加强，不靠谱的想法丢掉算了。

精益创业提出一个非常重要的概念，最小可行产品，也就是许多人口中的 MVP（Minimum Viable Product）。

默认所有需求都不做，直到弄清楚为什么要做这件事。

## 07 解决了很多技术问题，为什么你依然在“坑”里？

一个人能在自己的工作范围内多看到两三级都是有可能的。在公司规模不大时，从基层到老板没有太多层级，跳跃就显得很明显，而公司一大，层级一多，从低到顶的跳跃就不太可能了，但跨越级别跳跃是可能的。

想把工作做好，就需要不断扩大自己工作的上下文，多了解一下别人的工作逻辑是什么样的，认识软件开发的全生命周期。

扩大自己的上下文，除了能对自己当前的工作效率提高有帮助，对自己的职业生涯也是有好处的。随着你看到的世界越来越宽广，得到的机会也就越来越多。

如果今天的内容你只记住一件事，那请记住：扩大自己工作的上下文，别把自己局限在一个“程序员”的角色上。

## 答疑解惑如何管理你的上级？

### 问题1：领导要求的，无力反驳怎么办？

我们要敢于管理上级，对上级不合理的要求说“不”

1. 管理上级的预期。把自己看到的问题暴露给上级，让他选择。告诉上级，这个压缩会影响到什么。比如，要想做这个调整，你需要放弃的内容是什么；或者，我可以给出一个快速上线的临时方案，但接下来的几天，我需要调整，让代码回到一个正常的状态中
2. 帮助上级丰富知识。
3. 说出你的想法。如果你什么都不做，上级会按照他自己的理解安排工作。

### 问题2：产品经理总拿老板说事，怎么办？

老板要求的是方向，不是产品特性。大老板不会安排那么细的细节。所以，一个产品经理该做的事就是把老板给的方向，变成一个个可以实现的产品特性，他要分析其中的合理与不合理。

不合理的部分应该是他和老板去沟通的，而不是让开发团队来实现

在真实世界中，更有可能的情形是，产品经理“拿着鸡毛当令箭”，老板说的是试一下，到他这里就变成了必须完成。他不敢对老板提问，就只能压迫下游了。

这种情况，你就不妨和产品经理一起去见老板。

### 问题3：别人能做的，我们也要做

两个与产品经理交流可能出现的典型问题：一个是竞争对手有的产品，我们也要有；另一个是人家能做到的，说明技术上可行，我们也能开发。

我带你来分别看下，这两种说法你该如何应对。

第一，竞争对手有的产品，我们也要有。

“抄”不是问题，问题是无脑地抄。竞争对手有这个特性，他为什么要做？他做这个特性与它其他特性是怎么配合的？我们做这个特性，在我们的产品里怎样发挥价值？作为产品经理，你必须给我讲清楚这些。

即便我们最终的结果是，做的与竞争对手一模一样，经过思考之后的“抄袭”也是一件价值更大的事。

第二：人家能做到，说明技术上是可行的。

关于这一点，我不得不说，产品经理说得对。别人能做到，说明技术上肯定是可行的。

不过，我们必须分清楚两件事：需求和技术。

要做什么是需求，怎么做是技术。与产品经理要确认的是，这个需求是不是合理，该不该做。技术上能否实现，这是开发团队要考虑的事情，并不是产品经理说事的理由。

还有一种情况是，需求确实合理，但技术实现的成本极高，所需花费的时间很长。在这种情况下，你和产品经理之间很难互相说服。

解决方案是，将问题升级，放到更大的上下文中，让上一层的领导来决定，此时此刻，在现有的资源约束下，是否要按照这种方式做。同时，你最好再提供一个可选的替换方案，这样领导才能更好做选择。

## 12 测试也是程序员的事吗？

对于每个程序员来说，只有在开发阶段把代码和测试都写好，才有资格说，自己交付的是高质量的代码。

越是底层的测试，牵扯到相关内容越少，而高层测试则涉及面更广。

多写单元测试。

## 13 先写测试，就是测试驱动开发（TDD, Test Driven Development）吗？

TDD的节奏：“红-绿-重构”。

* 红，表示写了一个新的测试，测试还没有通过的状态；
* 绿，表示写了功能代码，测试通过的状态；
* 重构，就是再完成基本功能之后，调整代码的过程。

因为重构和测试的互相配合，它会驱动着你把代码写得越来越好。这是对“驱动”一词最粗浅的理解。

我们要编写具有可测试性的代码。

## 14 大师级程序员的工作秘笈

《测试驱动开发》这本书的作者 Kent Beck，完全是在书中展示他自己的工作方式。这也是我把 TDD 放到这个部分来讲的重要原因，Kent Beck 在做的就是任务分解。

Kent Beck 是怎么做的呢？每当遇到一件要做的事，Kent Beck 总会先把它分解成几个小任务，记在一个清单上，然后，才是动手写测试、写代码、重构这样一个小循环。等一个循环完成了，他会划掉已经做完的任务，开始下一个。

一旦在解决问题的过程中遇到任何新的问题，他会把这个要解决的问题记录在清单上，保证问题不会丢失，然后，继续回到自己正在处理的任务上。当他把一个个任务完成的时候，问题就解决完了。

Kent Beck 的做法清晰而有节奏，每个任务完成之后，代码都是可以提交的。

## 17 程序员也可以“砍”需求吗？

基本上，闯入你脑海的需求描述是主题（epic），在敏捷开发中，有人称之为主用户故事（master story）。

如果你对需求的管理粒度就是主题，那好多事情就没法谈了。比如，时间紧迫的时候，我想砍需求，你问产品经理，我不做登录行不行，你就等着被拒绝吧。

但是，如果你说时间比较紧，我能不能把登录验证码放到后面做，或是邮件地址验证的功能放到后面，这种建议产品经理是可以和你谈的。

绝大多数问题都是由于分解的粒度太大造成的，少有因为粒度太小而出问题的。所以，需求分解的一个原则是，粒度越小越好。

评价用户故事有一个“ INVEST 原则”，这是六个单词的缩写，分别是：

1. Independent，独立的
2. Negotiable，可协商的
3. Valuable，有价值的
4. Estimatable，可估算的
5. Small，小
6. Testable，可测试的

结合用户故事，我给你讲了一个好的需求管理基本单位是什么样子的，它要符合“INVEST原则”。其中的一个关键点是“小”，只有小的需求才方便管理和调整。

## 18 需求管理：太多人给你安排任务，怎么办？

### 需求的优先级

谈到时间管理，一个有效的时间管理策略是艾森豪威尔矩阵（Eisenhower Matrix）, 这个工具由史蒂芬·柯维（Stephen Richards Covey）在《高效能人士的七个习惯》里将其推广至世界各地。

它将事情按照重要和紧急两个维度进行划分，也就形成了四个部分：重要且紧急，重要不紧急，不重要且紧急，不重要不紧急。

按照时间管理的理念：

* 重要且紧急的事情要立即做。
* 重要但不紧急的事情应该是我们重点投入精力的地方。
* 紧急但不重要的事情，可以委托别人做。
* 不重要不紧急的事情，尽量少做。

当员工想不明白的事，换成老板的视角就全明白了。我鼓励每个程序员在更大的上下文中工作，也就是想让人获得更多的思考维度。

## 19 如何用最小的代价做产品？

我们要做的是验证一个想法的可行性，甚至不是为了开发一个软件，开发软件只是一种验证手段。

想要在实践中运用好最小可行产品的理念，就是要用最小的代价找到一条可行的路径。最小的代价就是能不做的事就不做，能简化的事情就简化。

可行的路径，是一条完整的用户体验路径，至少在用户眼中是这样的。我们常常会想给客户一个完整的系统，但在时间有限的情况下，我们必须学会分解。

做好产品开发，最可行的方式是采用 MVP。

## 划重点 关于“任务分解”，你要重点掌握哪些事？

* 测试金字塔
  * -- 行业中测试组合的最佳实践。
  * -- 多写单元测试是关键。
* 测试驱动开发
* 艾森豪威尔矩阵（Eisenhower Matrix）
* 最小可行产品

## 22 轻量级沟通：你总是在开会吗？

改善会议的第一个行动项是，减少参与讨论的人数。我们的第二个行动项是，如果你要讨论，找人面对面沟通。

站立会议建议你只说三件事：

* 我昨天做了什么？
* 我今天打算做什么？
* 我在过程中遇到了什么问题，需要请求帮助。

## 划重点 一次关于“沟通反馈”主题内容的复盘

在这个模块中，我们学习到了一些最佳实践。

### 看板

* 一种来自精益生产的可视化实践。
* 按阶段将任务放置其中。
* 可以帮助我们发现问题。

### 持续集成

* 做好持续集成的关键是，快速反馈。
* 本地检查通过之后再提交。
* 找到有效的反馈方式，比如：CI 监视器。
* 持续集成的纪律。
  * 只有 CI 服务器处于绿色的状态才能提交代码。
  * CI 服务器一旦检查出错，要立即修复。

### 回顾会议

* 软件团队复盘的一种实践。
* 枚举关注点，选出重点，深入讨论，列出行动项，找到负责人。
* 5个为什么
  * 又一个来自丰田的实践。
  * 沿着一条主线追问多个问题。

在这个模块中，我们还了解一些重要的思路，让我们把工作做得更好。

* 用信息论理解沟通反馈
* 写代码的进阶路径
  * 编写可以运行的代码。
  * 编写符合代码规范的代码。
  * 编写人可以理解的代码。
  * 用业务语言写代码。
* 会议是一种重量级的沟通方式
  * 减少参会人数。
  * 找人面对面沟通。
* 聆听用户声音
  * 能做自己用户，做自己的用户。
  * 能接近用户，接近用户。
  * 没有用户，创造用户。
* Fail Fast
  * 一种编写代码的原则。
  * 出现问题尽早报错。
* 金字塔原理
  * 从中心论点，到分论点，再到论据。

## 31 程序员怎么学习运维知识？

一个运维的知识体系，这个体系借鉴自 Java 的知识体系，包括了编程语言、核心库、第三方库、开发框架、单机部署和集群部署等诸多方面。我把今天提到的各种技术整理成一个表格列在下面，你可以参考它更好地理解运维知识。

|  类别 | Java | 运维  |
|---|---|---|
| 语言 | Java语言 | Shell |
| 核心库 | JDK | Unix/Linux核心命令 |
| 第三方库 | 第三方程序库,比如: Google Guava, SLF4J  | 第三方命令，比如：rsync、curl等 |
| 开发框架 | 开发框架，比如：Spring | 配置管理工具，比如：Chef、Puppet、 Ansible等 |
| 单机部署 | 应用服务器，比如Tomcat、Jetty | 部署环境，比如：虚拟机、Docker等 |
| 集群部署 | 企业级应用服务器，比如：IBM WebSphere | 云服务,比如: Amazon AWS、OpenStack、阿里云等; Docker集群，比如：Kubernates、Docker Swarm等 |

现在运维流行DevOps，高级一点就是AI，其中一篇文章[《DevOps 详解》](https://infoq.cn/article/detail-analysis-of-devops)不错。

[《DevOps知识体系与标准化的构建》](https://yq.aliyun.com/download/778)

[运维知识体系](https://www.unixhot.com/page/ops)

[Web缓存知识体系](https://www.unixhot.com/page/cache)

## 33 如何做好验收测试？

验收测试（Acceptance Testing），是站在用户的角度，看整个应用能否满足业务需求。

将验收测试自动化，行为驱动开发（Behavior Driven Development），BDD 是2003年由 Dan North 提出了来的

## 34 你的代码是怎么变混乱的？

提到软件设计，大部分程序员都知道一个说法“高内聚、低耦合”，但这个说法如同“期待世界和平”一样，虽然没错，但并不能很好地指导我们的具体工作。

人们尝试着用各种方法拆解这个高远的目标，而比较能落地的一种做法就是 Robert Martin 在他的《敏捷软件开发：原则、实践与模式》这本书中提出的面向对象设计原则：SOLID，这其实是五个设计原则的缩写，分别是

* 单一职责原则（Single responsibility principle，SRP）
* 开放封闭原则（Open–closed principle，OCP）
* Liskov 替换原则（Liskov substitution principle，LSP）
* 接口隔离原则（Interface segregation principle，ISP）
* 依赖倒置原则（Dependency inversion principle，DIP）

把函数写短

## 36 为什么总有人觉得5万块钱可以做一个淘宝？

同样的业务，不同的系统，要了解一个系统的演化过程，作为程序员，我们需要知道自己面对的到底是一个什么样的系统。

随着业务量的增长，原有技术无法满足需要，于是，就需要用新的技术去解决这个问题。这里的关键点在于：不同的业务量。

一个只服务于几个人的系统，单机就够了，一个刚刚入行的程序员也能很好地实现这个系统。而当业务量到达一台机器抗不住的时候，就需要用多台机器去处理，这个时候就必须考虑分布式系统的问题，可能就要适当地引入中间件。而当系统变成为海量业务提供服务，就没有哪个已经打造好的中间件可以提供帮助了，需要自己从更底层解决问题。

淘宝的工程师之所以要改进系统，真实的驱动力不是技术，而是不断攀升的业务量带来的问题复杂度。

评估系统当前所处的阶段，采用恰当的技术解决，是我们最应该考虑的问题。

也许你会说，**我做的系统没有那么大的业务量，我还想提高技术怎么办？答案是到有好问题的地方去。**

用简单技术解决问题，直到问题变复杂。

## 37 先做好DDD再谈微服务吧，那只是一种部署形式

想要做好微服务，关键在于服务的划分，而划分服务，最好先学习领域驱动设计（DDD，Domain Driven Design，DDD）。Eric Evans 2003年写了《领域驱动设计》，向行业介绍了DDD。

## 38 新入职一家公司，怎么快速进入工作状态？

运用思考框架，了解一个项目，从大图景开始。按照业务、技术和团队运作三个方面去了解。

从大到小、由外而内，将要了解的内容层层分解，有了大图景之后，很容易知道自己做的事情到底在整体上处于什么样的位置

| 大目标 | 小目标 | 内容 |
|---|---|---|
| 业务 | 业务 | 做什么,解决什么问题,业务流程是什么样的 |
| 技术 | 技术栈 |   |
|  | 系统的业务架构 | 包含哪些模块、与哪些外部系统有交互 |
|  | 外部接口 | 接口方式、承载协议 |
|  | 内部模块 | 模块划分、模块职责、分层抽象 |
|  | 代码 | 构建脚本、代码结构 |
| 团队运作 | 外部接口 | 需求来源、产品用户等 |
|  | 内部运作 | 定期活动、日常活动等 |

## 39 面对遗留系统，你应该这样做

改造遗留系统，我给你几个建议：

* 构建测试防护网，保证新老模块功能一致；
* 分成小块，逐步替换；
* 构建好领域模型；
* 寻找行业中关于系统构建的最新理解。

## 40 我们应该如何保持竞争力？

* 成为行业专家，制定高目标。
* 向大师学习，开拓视野。
* 找到好的问题，和高水平的人一起工作。

### 成为一专多能的 T 型人

成为一专多能的 T 型人，有了“一专”，“多能”才是有意义的，否则，就是低水平重复，而这正是很多人职业生涯不见起色的真正原因。这里的“专”不是熟练，而是深入。

你会发现很多优秀的人，在很多方面都会很优秀，这是“一专”带来的触类旁通。

当你有了“一专”，拓展“多能”，就会拥有更宽广的职业道路。比如，我拥有了深厚的技术功底，通晓怎么做软件：

* 如果还能够带着其他人一起做好，就成了技术领导者。
* 如果能够分享技术的理解，就有机会成为培训师。
* 如果能够在实战中帮助别人解决问题，就可以成为咨询师。

反过来，当你有了“多能”，也可以拓宽你的视野，帮你认清自己的“一专”怎样更好地发挥价值，而不是狭隘地认为自己有了技术，就已经天下尽在掌握了。视野窄，缺乏大局观，也成为了许多程序员再进一步的阻碍。

也许你会说，我在公司已经独当一面了，应该算有“一专”了吧？但我想说的是，可能还不够。只做一个公司的专家，受一个公司的波动影响太大，而**成为行业的专家，才会降低自己职业生涯的风险**。

有时，我在面试时会问候选人这样一个问题：“如果让你在一次技术大会上做分享，你会讲什么呢？”我真正的问题是，以行业标准衡量，你觉得你在哪个方面是专家呢？

很多人的焦虑就源自目标太低，找不到前进的动力。给自己定下一个可以长期努力的目标，走在职业的道路上才不致于很快丧失动力。

### 在学习区成长

怎么才能让自己的水平不断提高呢？我的答案是，找一个好问题去解决，解决了一个好的问题能够让你的水平快速得到提升。什么是好问题？就是比你当前能力略高一点的问题，比如：

* 如果你还什么都不会，那有一份编程的工作就好。
* 如果你已经能够写好普通的代码，就应该尝试去编写程序库。
* 如果实现一个具体功能都没问题了，那就去做设计，让程序有更好的组织。
* 如果你已经能完成一个普通的系统设计，那就应该去设计业务量更大的系统。

为什么程序员都愿意到大厂工作？因为那里有高水平的人和好的问题。但如果只是到大厂去做低水平的事，那就是浪费时间了。所以，即便你真的想到大厂工作，与谁一起工作，做什么事，远比进入大厂本身要重要得多。

## 总复习 重新来“看书”

[10x 程序员工作法 提到书籍的豆列](https://www.douban.com/doulist/113366760/)
